<!DOCTYPE html><html><head>
      <title>README</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\trovallet\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.13\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="readme">README </h1>
<p>Before diving in here, I recommand trying multiple type of classic DFU (if available)</p>
<h2 id="2-types-of-smp-server">2 types of SMP Server </h2>
<p>You can configure 2 types of SMP Server.</p>
<p>The presented version in the Main tutorials.</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="481px" preserveAspectRatio="none" style="width:510px;height:481px;background:#FFFFFF;" version="1.1" viewBox="0 0 510 481" width="510px" zoomAndPan="magnify"><defs></defs><g><!--cluster Bootloader--><g id="cluster_Bootloader"><path d="M19.5,7 L210.5,7 A12.5,12.5 0 0 1 223,19.5 L223,28.2969 L7,28.2969 L7,19.5 A12.5,12.5 0 0 1 19.5,7 " fill="#FF0000" style="stroke:#FF0000;stroke-width:1.0;"></path><rect fill="none" height="416.79" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="216" x="7" y="7"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="223" y1="28.2969" y2="28.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="77" y="23.9951">Bootloader</text></g><ellipse cx="111" cy="60" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><g id="Bootloader.Verif_image_integrity"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="30.5" y="147"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="30.5" x2="191.5" y1="173.2969" y2="173.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="40.5" y="164.9951">Verif_image_integrity</text></g><g id="Bootloader.Bricked"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="75" y="349.79"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="75" x2="147" y1="376.0869" y2="376.0869"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="85" y="367.7851">Bricked</text></g><ellipse cx="452" cy="60" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><g id="OFF"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="331" y="147"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="331" x2="381" y1="173.2969" y2="173.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="342.5" y="164.9951">OFF</text></g><path d="M259.5,274 L484.5,274 A12.5,12.5 0 0 1 497,286.5 L497,300.2969 L247,300.2969 L247,286.5 A12.5,12.5 0 0 1 259.5,274 " fill="#00D4FA" style="stroke:#00D4FA;stroke-width:1.0;"></path><rect fill="none" height="201.5938" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="250" x="247" y="274"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="247" x2="497" y1="300.2969" y2="300.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="334.5" y="291.9951">Application</text><ellipse cx="373.5" cy="321.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><path d="M271.5,367.2969 L475.5,367.2969 A12.5,12.5 0 0 1 488,379.7969 L488,393.5937 L259,393.5937 L259,379.7969 A12.5,12.5 0 0 1 271.5,367.2969 " fill="#F1F1F1" style="stroke:#F1F1F1;stroke-width:1.0;"></path><rect fill="none" height="98.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="259" y="367.2969"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="259" x2="488" y1="393.5937" y2="393.5937"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="344.5" y="385.292">Running</text><g id="Application.Running.App_Work"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="271" y="405.5937"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="271" x2="360" y1="431.8906" y2="431.8906"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="281" y="423.5889">App_Work</text></g><g id="Application.Running.SMP_Server"><rect fill="#14DC00" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="378" y="405.5937"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="378" x2="479" y1="431.8906" y2="431.8906"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="388" y="423.5889">SMP_Server</text></g><!--link App_Work to SMP_Server--><g id="link_App_Work_SMP_Server"><path d="M360.08,430.5937 C365.96,430.5937 365.84,430.5937 371.72,430.5937 " fill="none" id="App_Work-to-SMP_Server" style="stroke:#FFFFFF;stroke-width:1.0;"></path><polygon fill="#FFFFFF" points="377.72,430.5937,368.72,426.5937,372.72,430.5937,368.72,434.5937,377.72,430.5937" style="stroke:#FFFFFF;stroke-width:1.0;"></polygon></g><!--link *start*Application to Running--><g id="link_*start*Application_Running"><path d="M373.5,331.5769 C373.5,340.1269 373.5,347.5369 373.5,361.1469 " fill="none" id="*start*Application-to-Running" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="373.5,367.1469,377.5,358.1469,373.5,362.1469,369.5,358.1469,373.5,367.1469" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link *start* to OFF--><g id="link_*start*_OFF"><path d="M447.17,68.97 C440.24,80.18 426.75,101.01 413,117 C403.4,128.16 396.172,135.4547 385.922,144.8547 " fill="none" id="*start*-to-OFF" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="381.5,148.91,390.8366,145.775,385.185,145.5306,385.4295,139.879,381.5,148.91" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link OFF to Bootloader--><g id="link_OFF_Bootloader"><path d="M330.53,163.22 C306.66,154.9 271.13,139.74 247,117 C236.895,107.475 229.0725,94.0375 223.6913,82.7125 C223.5231,82.3586 223.3573,82.0068 223.1939,81.6572 C223.1531,81.5698 225.6443,86.9221 225.6038,86.835 " fill="none" id="OFF-to-Bootloader" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="223.0718,81.3954,223.2433,91.2427,225.1818,85.9284,230.4961,87.8668,223.0718,81.3954" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="248" y="113.0669">switch on</text></g><!--link Bootloader to OFF--><g id="link_Bootloader_OFF"><path d="M223.2118,62.4872 C223.3893,62.523 223.5693,62.5594 223.7518,62.5966 C224.4815,62.7451 225.2503,62.9049 226.0556,63.0761 C232.4981,64.4459 241.2775,66.5519 251.0925,69.5688 C270.7225,75.6025 294.495,85.28 312,100 C326.87,112.5 335.5809,125.9865 343.0309,141.1265 " fill="none" id="Bootloader-to-OFF" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="345.68,146.51,345.2954,136.6687,343.4724,142.0237,338.1173,140.2008,345.68,146.51" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="328" y="113.0669">switch off</text></g><!--link *start*Bootloader to Verif_image_integrity--><g id="link_*start*Bootloader_Verif_image_integrity"><path d="M111,70.37 C111,87.1 111,116.59 111,140.62 " fill="none" id="*start*Bootloader-to-Verif_image_integrity" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="111,146.62,115,137.62,111,141.62,107,137.62,111,146.62" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link Verif_image_integrity to Bricked--><g id="link_Verif_image_integrity_Bricked"><path d="M111,197.22 C111,235.81 111,304.84 111,343.49 " fill="none" id="Verif_image_integrity-to-Bricked" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="111,349.49,115,340.49,111,344.49,107,340.49,111,349.49" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="112" y="240.0669">image KO</text></g><!--link Verif_image_integrity to Application--><g id="link_Verif_image_integrity_Application"><path d="M143.7,197.34 C156.05,206.58 170.21,217.23 183,227 C203.64,242.75 220.7264,255.886 241.9264,272.306 " fill="none" id="Verif_image_integrity-to-Application" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="246.67,275.98,242.004,267.3066,242.717,272.9183,237.1053,273.6313,246.67,275.98" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="204" y="240.0669">image OK</text></g><!--reverse link OFF to Application--><g id="link_OFF_Application"><path d="M358.4079,203.2009 C359.9579,222.6009 361.76,245.23 364.03,273.79 " fill="none" id="OFF-backto-Application" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="357.93,197.22,354.6595,206.51,358.3282,202.2041,362.6341,205.8728,357.93,197.22" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="362" y="240.0669">switch off</text></g><!--SRC=[TP3D2u904CNlyrSCU0i4WquUWZxm8c4Kr452H4STibtPfYJ2_xsr3_9GXuNTzzwFURFnw82kEyKe2C2UvtskjTGwpSduU6vPiWgrWg_w0RvkKG2S9HKQiEWOok-06Bz7xCXmaV0fBIbX9LGQbflrV-gl8eQp8-K-FaqC8-W0_iHptIgBp9gcvYmLrkg3HI4CL7GlpV_wmw3ZUSj9C1kkiBaenQgqoYl-VlSHxDbahyqHNSDb9R7JLYnqiDXsjKwsPAxzfumdouNdMQ23xW40]--></g></svg></p><p>In this representation you can see 3 main states:</p>
<ul>
<li>OFF</li>
<li>Bootloader</li>
<li>Application</li>
</ul>
<p>When turning on the device, it launch the bootloader.<br>
The bootloader will then perform an integrity check (and multiple other checks not shown to keep it simple)<br>
If the tests pass, the application is authorized to load.<br>
Once the application is loaded, the DFU_State is accessible all the time, as it runs at the same time as the application</p>
<p>What is key to understand is that the DFU State is running at the same time as the application.<br>
And the update is performed when it resets.</p>
<p class="plantuml"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentstyletype="text/css" height="560px" preserveAspectRatio="none" style="width:661px;height:560px;background:#FFFFFF;" version="1.1" viewBox="0 0 661 560" width="661px" zoomAndPan="magnify"><defs></defs><g><!--cluster Bootloader--><g id="cluster_Bootloader"><path d="M19.5,7 L403.5,7 A12.5,12.5 0 0 1 416,19.5 L416,28.2969 L7,28.2969 L7,19.5 A12.5,12.5 0 0 1 19.5,7 " fill="#FF0000" style="stroke:#FF0000;stroke-width:1.0;"></path><rect fill="none" height="519.65" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="409" x="7" y="7"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="7" x2="416" y1="28.2969" y2="28.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="173.5" y="23.9951">Bootloader</text></g><ellipse cx="90" cy="60" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><g id="Bootloader.Verif_Call_DFU"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="31.5" y="147"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="31.5" x2="148.5" y1="173.2969" y2="173.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="41.5" y="164.9951">Verif_Call_DFU</text></g><g id="Bootloader.SMP_Server"><rect fill="#14DC00" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="282.5" y="147"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="282.5" x2="383.5" y1="173.2969" y2="173.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="292.5" y="164.9951">SMP_Server</text></g><g id="Bootloader.Verif_image_integrity"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="122.5" y="274"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="122.5" x2="283.5" y1="300.2969" y2="300.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="141" x="132.5" y="291.9951">Verif_image_integrity</text></g><g id="Bootloader.Bricked"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="167" y="452.65"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="167" x2="239" y1="478.9469" y2="478.9469"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52" x="177" y="470.6451">Bricked</text></g><ellipse cx="645" cy="60" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><g id="OFF"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="511" y="147"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="511" x2="561" y1="173.2969" y2="173.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="522.5" y="164.9951">OFF</text></g><path d="M466,401 L536,401 A12.5,12.5 0 0 1 548.5,413.5 L548.5,427.2969 L453.5,427.2969 L453.5,413.5 A12.5,12.5 0 0 1 466,401 " fill="#00D4FA" style="stroke:#00D4FA;stroke-width:1.0;"></path><rect fill="none" height="153.2969" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="453.5" y="401"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="453.5" x2="548.5" y1="427.2969" y2="427.2969"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="463.5" y="418.9951">Application</text><ellipse cx="493" cy="448.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"></ellipse><g id="Application.Work"><rect fill="#F1F1F1" height="50" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="465.5" y="494.2969"></rect><line style="stroke:#181818;stroke-width:0.5;" x1="465.5" x2="520.5" y1="520.5938" y2="520.5938"></line><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="475.5" y="512.292">Work</text></g><!--link *start*Application to Work--><g id="link_*start*Application_Work"><path d="M493,458.6069 C493,467.6469 493,475.7869 493,488.0269 " fill="none" id="*start*Application-to-Work" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="493,494.0269,497,485.0269,493,489.0269,489,485.0269,493,494.0269" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link *start* to OFF--><g id="link_*start*_OFF"><path d="M640.4,69.18 C633.72,80.62 620.54,101.73 606,117 C592.56,131.12 580.1214,141.0594 566.0714,150.9794 " fill="none" id="*start*-to-OFF" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="561.17,154.44,570.8292,152.5166,565.2545,151.5561,566.215,145.9814,561.17,154.44" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link OFF to Bootloader--><g id="link_OFF_Bootloader"><path d="M510.72,161.29 C489.81,152.28 460.35,137.22 440,117 C430.15,107.215 422.335,93.7725 416.8937,82.5112 C416.7237,82.1593 416.556,81.8096 416.3906,81.4621 C416.3079,81.2883 416.2258,81.1152 416.1443,80.9426 C416.1035,80.8563 418.6183,86.1988 418.5779,86.1128 " fill="none" id="OFF-to-Bootloader" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="416.0224,80.6842,416.2365,90.5308,418.1519,85.2081,423.4747,87.1235,416.0224,80.6842" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="441" y="113.0669">switch on</text></g><!--link Bootloader to OFF--><g id="link_Bootloader_OFF"><path d="M416.2041,62.165 C416.2941,62.1797 416.3847,62.1946 416.476,62.2097 C416.6586,62.2398 416.8437,62.2705 417.0313,62.3019 C417.7817,62.4274 418.5717,62.5635 419.3988,62.7105 C426.015,63.8866 434.9975,65.7669 444.945,68.6362 C464.84,74.375 488.595,84.07 505,100 C517.93,112.56 524.0816,125.6773 528.6616,140.8073 " fill="none" id="Bootloader-to-OFF" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="530.4,146.55,531.6209,136.7771,528.9514,141.7645,523.964,139.0949,530.4,146.55" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="518" y="113.0669">switch off</text></g><!--link *start*Bootloader to Verif_Call_DFU--><g id="link_*start*Bootloader_Verif_Call_DFU"><path d="M90,70.38 C90,87.11 90,116.6 90,140.63 " fill="none" id="*start*Bootloader-to-Verif_Call_DFU" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="90,146.63,94,137.63,90,141.63,86,137.63,90,146.63" style="stroke:#181818;stroke-width:1.0;"></polygon></g><!--link Verif_Call_DFU to SMP_Server--><g id="link_Verif_Call_DFU_SMP_Server"><path d="M148.82,172 C189.56,172 237.23,172 276.12,172 " fill="none" id="Verif_Call_DFU-to-SMP_Server" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="282.12,172,273.12,168,277.12,172,273.12,176,282.12,172" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="167" y="165.0669">button pressed</text></g><!--link Verif_Call_DFU to Verif_image_integrity--><g id="link_Verif_Call_DFU_Verif_image_integrity"><path d="M112.06,197.4 C131.97,219.43 157.0872,247.2084 176.9772,269.2184 " fill="none" id="Verif_Call_DFU-to-Verif_image_integrity" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="181,273.67,177.9335,264.3107,177.6476,269.9603,171.998,269.6745,181,273.67" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="154" y="240.0669">button not pressed</text></g><!--link Verif_image_integrity to Bricked--><g id="link_Verif_image_integrity_Bricked"><path d="M203,324.19 C203,357.83 203,412.4 203,446.19 " fill="none" id="Verif_image_integrity-to-Bricked" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="203,452.19,207,443.19,203,447.19,199,443.19,203,452.19" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="204" y="367.0669">image KO</text></g><!--link Verif_image_integrity to Application--><g id="link_Verif_image_integrity_Application"><path d="M256.59,324.45 C296.99,343.59 353.22,371.79 400,401 C417.93,412.2 431.9231,422.0794 448.3431,434.5594 " fill="none" id="Verif_image_integrity-to-Application" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="453.12,438.19,448.3751,429.5595,449.1393,435.1645,443.5343,435.9286,453.12,438.19" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="348" y="367.0669">image OK</text></g><!--reverse link OFF to Application--><g id="link_OFF_Application"><path d="M532.5031,203.3005 C527.4831,246.8605 517.46,333.86 509.77,400.58 " fill="none" id="OFF-backto-Application" style="stroke:#181818;stroke-width:1.0;"></path><polygon fill="#181818" points="533.19,197.34,528.1859,205.8229,532.6176,202.3071,536.1333,206.7388,533.19,197.34" style="stroke:#181818;stroke-width:1.0;"></polygon><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="525" y="303.5669">switch off</text></g><!--SRC=[TP11Qy9W38Rl-HK1RqAX0qyz39ob5naLPDj1HldMBwt1xaj9usGC__iwDxNRz108x_i-2Sbg_8nHT8jvba5VX_vEn1fndZJ1RiTMhb42dDKZS7Qh2g0pPpHWSQJaFm1nzRFYaPIhOkQQfaYpXzxuBM2aNA-j3oxl5yMIzErhniqadSLnWYzRCmdOAdKT-GlmQG6_kfeA3aQrihsVq23s3_-J_RvUkToGJ_1WuZo7FS2Lk9TTw95fspPSEcC9HooVmq35QDjU_zamE8hZT99DXtzx4jt0_XC0]--></g></svg></p><p>In this other representation you can see 3 same states.</p>
<p>In that case, the "DFU State" is called <strong><code>SERIAL RECOVERY</code></strong><br>
More documentation <a href="https://docs.mcuboot.com/serial_recovery.html">here</a></p>
<p>It is a different placement in the booting sequence and a different naming, but it mainly does the same thing.</p>
<p>The main difference is that Serial Recovery is accessible before the application is launched.<br>
It needs an interaction with the target to activate the State.<br>
This is generally done via the push of another button at the startup of the target.</p>
<p>After the update is done, it needs to restart the target to launch the new application.</p>
<h2 id="pros">Pros </h2>
<p>The main advantage is that the device is never in DFU_State when it is in normal usage.</p>
<p>The second main advantage is that the size of the application remains the same, giving more room for additional features</p>
<h2 id="cons">Cons </h2>
<p>The main disadvantage is that it's limited to UART and USB-CDC.</p>
<p>Couldn't make it work with 'pure' / 'Vanilla' Zephyr</p>
<p>Couldn't make it work with 2 image slots (managed to upload but couldn't confirm)</p>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>